<!doctype html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Sleep Outside | Cedar Ridge Rimrock 2-person tent</title>

    <link rel="stylesheet" href="../css/style.css" />

    <script src="../js/product.js" type="module"></script>
    <script src="../js/headerFooter.js" type="module"></script>
    <script type="module">import { injectHeaderFooter } from '../js/headerFooter.js'; injectHeaderFooter();</script>
  </head>

  <body>
    <!-- header will be injected here -->

    <main class="divider">
      <div class="hero">
        <img
          src="../images/banner-sm.jpg"
          srcset="../images/banner-sm.jpg 500w, ../images/banner.jpg"
          alt="image of a high mountain lake"
        />
        <div class="mission">
          <p>
            Our mission is to provide you with everything you need to sleep
            outside comfortably at an affordable price.
          </p>
        </div>
      </div>

      <section class="product-detail">
        <h3>Cedar Ridge</h3>

        <h2 class="divider">Rimrock Tent - 2-Person, 3-Season</h2>

        <img
          class="divider"
          src="../images/tents/cedar-ridge-rimrock-tent-2-person-3-season-in-rust-clay~p~344yj_01~320.jpg"
          alt="Rimrock Tent - 2-Person, 3-Season"
        />

        <p class="product-card__price">$69.99</p>

        <p class="product__color">Rust/Clay</p>

        <p class="product__description">
          Lightweight and ready for adventure, this Cedar Ridge Rimrock tent
          boasts a weather-ready design that includes a tub-style floor and
          factory-sealed rain fly
        </p>

        <div class="product-detail__add">
          <button id="addToCart" data-id="344YJ">Add to Cart</button>
        </div>
      </section>
    </main>

    <!-- footer will be injected here -->
    <script>
      // Make Add to Cart button functional for this static product page
      document.addEventListener("DOMContentLoaded", function() {
        const addToCartBtn = document.getElementById("addToCart");
        if (!addToCartBtn) return;
        addToCartBtn.addEventListener("click", function() {
          // Product data for Cedar Ridge Rimrock 2
          const product = {
            Id: "344YJ",
            Name: "Cedar Ridge Rimrock Tent - 2-Person, 3-Season",
            NameWithoutBrand: "Rimrock Tent - 2-Person, 3-Season",
            Brand: { Id: "35027", Name: "Cedar Ridge" },
            Image: "../images/tents/cedar-ridge-rimrock-tent-2-person-3-season-in-rust-clay~p~344yj_01~320.jpg",
            FinalPrice: 69.99,
            SuggestedRetailPrice: 89.99,
            ListPrice: 69.99,
            Colors: [{ ColorCode: "01", ColorName: "Rust/Clay" }],
            DescriptionHtmlSimple: "Lightweight and ready for adventure, this Cedar Ridge Rimrock tent boasts a weather-ready design that includes a tub-style floor and factory-sealed rain fly.",
            quantity: 1
          };
          let cart = JSON.parse(localStorage.getItem("so-cart")) || [];
          const existing = cart.find(item => item.Id === product.Id);
          if (existing) {
            existing.quantity = (existing.quantity || 1) + 1;
          } else {
            cart.push(product);
          }
          localStorage.setItem("so-cart", JSON.stringify(cart));
          // Optionally update cart count in header if present
          const cartCount = document.getElementById("cart-count");
          if (cartCount) {
            const total = cart.reduce((sum, item) => sum + (item.quantity || 1), 0);
            cartCount.textContent = total;
          }
          // Redirect to cart/add.html
          window.location.href = "/src/cart/add.html";
        });
      });
    </script>
  </body>
</html>
